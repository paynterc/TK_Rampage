<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Init
enum spawnStates{
    spawning,
    bossComing,
    bossExploding,
    playerWins
}

state = spawnStates.spawning;
bossEvent = 0;
spawn_rate_object = 5;
spawn_rate_truck = 10;
spawn_rate_wave = 15;
spawn_rate_building = 10;
spawn_rate_hunter = 20;
spawn_rate_powerup = 15;
e_count = 10;// Enemies per wave (*2)
rc = room_width/2; // Room center

alarm[0] = room_speed * spawn_rate_object;
alarm[1] = room_speed * spawn_rate_wave;
alarm[2] = room_speed * spawn_rate_truck;
alarm[3] = room_speed * spawn_rate_building;
alarm[4] = room_speed * spawn_rate_hunter;
alarm[5] = room_speed * spawn_rate_powerup;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Spawn a boss
event_user(bossEvent);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Spawn powerup
var xs = irandom_range(global.bound_l+32,global.bound_r-32) // x start point
instance_create(xs,-32,choose(obj_pup_heart,obj_pup_vortex));

alarm[5] = room_speed * spawn_rate_powerup;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Spawn hunter
if(state = state == spawnStates.spawning){

    scr_spawn_hunters();
}
alarm[4] = room_speed * spawn_rate_hunter;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Spawn building
//tile_add(bg_buildings, 0, 0, 112, 112, 0, 0, -9999);
var b1 = instance_create(-16,-10000,obj_building);
var b2 = instance_create(room_width+16,-10000,obj_building);
var throwme;

b1.sprite_index=choose(spr_building1,spr_building2,spr_building3,spr_building4,spr_building5,spr_building6,spr_building_hardware,spr_building_candy);
b2.sprite_index=choose(spr_building1,spr_building2,spr_building3,spr_building4,spr_building5,spr_building6,spr_building_hardware,spr_building_candy);

if(debug_mode){
    b1.sprite_index = spr_building_candy;
    b2.sprite_index = spr_building_candy;
}


// LEFT SIDE
b1.y = b1.sprite_height * -1;
if(b1.sprite_index==spr_building6){
    instance_create(global.bound_l-32, b1.y + 100, obj_donut );
}
if(b1.sprite_index==spr_building2){
    instance_create(global.bound_l-22, b1.y + 132, obj_tire );
}
if(b1.sprite_index==spr_building_hardware){
    throwme = instance_create(global.bound_l-22, b1.y + 80, obj_hammer );
    throwme.image_angle = 45;
}
if(b1.sprite_index==spr_building_candy){
    throwme = instance_create(global.bound_l-22, b1.y + 100, obj_gumballmachine );
    throwme.image_xscale = 1.5;
    throwme.image_yscale = 1.5;
}


// RIGHT SIDE
b2.y = b2.sprite_height * -1;
if(b2.sprite_index==spr_building6){
    instance_create(global.bound_r+32, b2.y + 100, obj_donut );
}
if(b2.sprite_index==spr_building2){
    instance_create(global.bound_r+22, b2.y + 132, obj_tire );
}
if(b2.sprite_index==spr_building_hardware){
    throwme = instance_create(global.bound_r+22, b2.y + 80, obj_hammer );
    throwme.image_angle = 45;
}
if(b2.sprite_index==spr_building_candy){
    throwme = instance_create(global.bound_r+22, b2.y + 100, obj_gumballmachine );
    throwme.image_xscale = 1.5;
    throwme.image_yscale = 1.5;
}
alarm[3]=room_speed*spawn_rate_building;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Spawn vehicle

if(state == spawnStates.spawning){
    var xpoint = irandom_range( global.bound_l, global.bound_r );
    var thing = instance_create(xpoint,0,obj_vehicle);
    
    if(thing.x-(thing.sprite_width/2) &lt; global.bound_l + global.sidewalk_width){
        thing.x = global.bound_l + (thing.sprite_width/2)  + global.sidewalk_width;
    }else if(thing.x+(thing.sprite_width/2) &gt; global.bound_r - global.sidewalk_width){
        thing.x = global.bound_r - (thing.sprite_width/2) - global.sidewalk_width;
    }
}

alarm[2] = room_speed * spawn_rate_truck;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Spawn wave
if(instance_count&lt;300 &amp;&amp; !global.playerIsDead &amp;&amp; state == spawnStates.spawning){



    if(!instance_exists(obj_boss)){
    
        global.gamewave ++;
        
        if(global.gamewave==10){
            state = spawnStates.bossComing;
            bossEvent=0;
            instance_create(x,y,obj_text_bossalert);
            alarm[6] = room_speed * 5;
        }else if(global.gamewave==30){
            state = spawnStates.bossComing;
            bossEvent=1;
            instance_create(x,y,obj_text_bossalert);
            alarm[6] = room_speed * 5;
        }else if(global.gamewave==50){
            state = spawnStates.bossComing;
            bossEvent=2;
            instance_create(x,y,obj_text_bossalert);
            alarm[6] = room_speed * 5;
        }else{
                var wave = instance_create(0,0,obj_wave_spawner);
                wave.e_count = e_count + round(global.gamewave * .25);// Number of enemy pairs
                
                if(global.gamewave&gt;20){
                    wave.ob = choose(obj_en_disco,obj_en_pirate,obj_en_alien,obj_en_cop,obj_en_soldier);
                }else if(global.gamewave&gt;10){
                    wave.ob = choose(obj_en_pirate,obj_en_cop,obj_en_soldier);
                }else{
                    wave.ob = choose(obj_en_cop,obj_en_soldier);
                }
                
                with(wave){
                    event_user(0);// Trigger wave
                }
                
                if(global.gamewave &gt; 5){
                    var hunterOdds = 3;
                    var hunterRoll = irandom(hunterOdds);

                    if(hunterRoll == hunterOdds) scr_spawn_hunters();
                }
                                
        }
        

        
        
    }else{

        // Hunters can spawn during boss
        var hunterOdds = 3;
        var hunterRoll = irandom(hunterOdds);
        show_debug_message("hunter 2" + string(hunterRoll));
        
        if(hunterRoll == hunterOdds){
            /// Spawn hunter
            scr_spawn_hunters();
    
        }
        
    }
}
alarm[1] = room_speed * spawn_rate_wave;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Spawn sidewalk object
if(state != spawnStates.playerWins){
    var midParkingStrip = 186;
    var midLane = 264;
    var ob = choose(obj_trashcan,obj_tree,obj_bike,obj_meter,obj_manhole_cover);
    var lx,rx;
    if(ob==obj_tree || ob==obj_meter){
        lx=midParkingStrip;
        rx=room_width-midParkingStrip;
    }else if(ob==obj_manhole_cover){
        lx=irandom_range(midLane-32,midLane+32);
        rx=room_width-irandom_range(midLane-32,midLane+32);
    }else{
        lx = irandom_range(global.bound_r - global.sidewalk_width, global.bound_r);
        rx = irandom_range(global.bound_l, global.bound_l + global.sidewalk_width);
    }
    
    
    var cx = choose(lx,rx);
    
    var thing = instance_create(cx,0,ob);
    if(thing.x-(thing.sprite_width/2) &lt;global.bound_l){
        thing.x = global.bound_l + (thing.sprite_width/2);
    }else if(thing.x+(thing.sprite_width/2) &gt; global.bound_r){
        thing.x = global.bound_r - (thing.sprite_width/2);
    }
    
    if(ob==obj_manhole_cover){
        instance_create(thing.x,thing.y,obj_manhole);
    }
}


alarm[0] = room_speed * spawn_rate_object;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Check if boss is in position
if(state==spawnStates.bossComing){
    if(instance_exists(obj_boss)){
        if(obj_boss.state != STATE_GB_INIT){
            state = spawnStates.spawning
        }
    }
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="12">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// boss 3 cat
instance_create(room_width/2,global.bound_t - 200,obj_boss_cat);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// boss 2 hivemind
instance_create(room_width/2,global.bound_t - 200,obj_boss_hivemind);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Spawn Boss 1

instance_create(room_width/2,global.bound_t - 200,obj_boss_brain);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
